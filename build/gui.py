
# This file was generated by the Tkinter Designer by Parth Jadhav
# https://github.com/ParthJadhav/Tkinter-Designer


from pathlib import Path
import MusicPlayer as MP

# from tkinter import *
# Explicit imports to satisfy Flake8
from tkinter import Tk, Canvas, Entry, Text, Button, PhotoImage, filedialog, Label

OUTPUT_PATH = Path(__file__).parent
ASSETS_PATH = OUTPUT_PATH / Path("./assets")


def relative_to_assets(path: str) -> Path:
    return ASSETS_PATH / Path(path)

#############################
#     GLOBAL VARIABLES      #
#############################

# State can have three values: Open, Paused, Playing
state = "Open"

title = ""
artist = ""

#############################
#          ACTIONS          #
#############################

def playAction():
    global state
    
    newState = MP.play_music(state)
    state = newState
    
def pauseAction():
    global state
    state = MP.pause_music()
    
def uploadAction():
    global title, artist
    
    filename = filedialog.askopenfilename()
    print('Selected:', filename)
    title, artist = MP.load_music(filename)
    
    state = "Open"
    title_label["text"] = title
    artist_label["text"] = artist
    
#############################
#         GUI CODE          #
#############################  

window = Tk()

window.geometry("1000x625")
window.configure(bg = "#FFFFFF")

canvas = Canvas(
    window,
    bg = "#FFFFE7",
    height = 625,
    width = 1000,
    bd = 0,
    highlightthickness = 0,
    relief = "ridge"
)

canvas.place(x = 0, y = 0)
image_image_1 = PhotoImage(
    file=relative_to_assets("background.png"))
image_1 = canvas.create_image(
    500.0,
    312.0,
    image=image_image_1
)

canvas.create_rectangle(
    0.0,
    430.0,
    1000.0,
    435.0,
    fill="#FFFFE7",
    outline="")

canvas.create_text(
    622.0,
    50.0,
    anchor="nw",
    text="NightP3",
    fill="#FFFFE7",
    font=('SF Pro Rounded', 80 * -1)
)

button_image_1 = PhotoImage(
    file=relative_to_assets("button_1.png"))
button_1 = Button(
    image=button_image_1,
    borderwidth=0,
    highlightthickness=0,
    command=playAction,
    relief="flat"
)
button_1.place(
    x=45,
    y=470.0,
    width=125,
    height=125
)

button_image_2 = PhotoImage(
    file=relative_to_assets("button_2.png"))
button_2 = Button(
    image=button_image_2,
    borderwidth=0,
    highlightthickness=0,
    command=pauseAction,
    relief="flat"
)
button_2.place(
    x=200.0,
    y=490.0,
    width=100.0,
    height=100.0
)

button_image_3 = PhotoImage(
    file=relative_to_assets("button_3.png"))
button_3 = Button(
    image=button_image_3,
    borderwidth=0,
    highlightthickness=0,
    command=uploadAction,
    relief="flat"
)
button_3.place(
    x=300.0,
    y=490.0,
    width=100.0,
    height=100.0
)

# Song Title
title_label = Label(window, anchor="c", bg="#FE636B", font=("SF Pro Rounded", 20 * -1), fg="#FFFFE7", text="~", pady=0, padx=0)
title_label.place(x=75.0, y=330.0)

# Song Artist
artist_label = Label(window, anchor="c", bg="#FE636B", font=("SF Pro Rounded", 20 * -1), fg="#FFFFE7", text="~", pady=0, padx=0)
artist_label.place(x=150.0, y=375.0)

window.resizable(False, False)
window.mainloop()
